# Course2_hw4 Телеграмм бот КВИЗ. 
Написать чат бот:
- писок намерений составить самостоятельно;
- выбрать тип нейронной сети для обучения;
- добавить логирование хода обучения сети;
- добавить логирование вопросов/ответов;
- запустить чат бот в ТГ.

Был реализован бот КВИЗ @teenwolf395bot. Его основная функция это игра в КВИЗ с уровнями сложности и статистикой. Также бот обрабатывает естественный язык.

## Меню бота

Начать игру - начать новый квиз
Статистика - посмотреть свои результаты  
Помощь - узнать, как пользоваться ботом
Или просто напишите, что хотите сделать!
Например: "Хочу начать игру" или "Покажи статистику"

## Метрики обучения нейросети
```
"accuracy": 0.8153846153846154,
  "macro avg": {
    "precision": 0.8457701663271172,
    "recall": 0.7930426950788325,
    "f1-score": 0.8084120919996692,
    "support": 910.0
  },
  "weighted avg": {
    "precision": 0.8413609534805725,
    "recall": 0.8153846153846154,
    "f1-score": 0.8195206625043377,
    "support": 910.0
  }
```
## Пример лог файла обучения нейросети
```
19:29:07 - Эпоха 19/20 | Батч 10/114 | Loss: 1.3289 | Accuracy: 53.12%
19:29:09 - Эпоха 19/20 | Батч 20/114 | Loss: 1.0562 | Accuracy: 71.88%
19:29:09 - Эпоха 19/20 | Батч 30/114 | Loss: 1.2029 | Accuracy: 53.12%
19:29:10 - Эпоха 19/20 | Батч 40/114 | Loss: 1.3093 | Accuracy: 56.25%
19:29:11 - Эпоха 19/20 | Батч 50/114 | Loss: 1.2905 | Accuracy: 56.25%
19:29:12 - Эпоха 19/20 | Батч 60/114 | Loss: 1.0385 | Accuracy: 68.75%
19:29:13 - Эпоха 19/20 | Батч 70/114 | Loss: 1.3674 | Accuracy: 56.25%
19:29:13 - Эпоха 19/20 | Батч 80/114 | Loss: 1.0753 | Accuracy: 56.25%
19:29:14 - Эпоха 19/20 | Батч 90/114 | Loss: 1.1374 | Accuracy: 62.50%
19:29:15 - Эпоха 19/20 | Батч 100/114 | Loss: 1.4774 | Accuracy: 50.00%
19:29:16 - Эпоха 19/20 | Батч 110/114 | Loss: 1.5481 | Accuracy: 40.62%
19:29:16 - Эпоха 19/20 | Батч 114/114 | Loss: 1.3906 | Accuracy: 50.00%
19:29:17 - Эпоха 20/20 | Батч 10/114 | Loss: 1.3680 | Accuracy: 50.00%
19:29:18 - Эпоха 20/20 | Батч 20/114 | Loss: 1.1112 | Accuracy: 62.50%
19:29:19 - Эпоха 20/20 | Батч 30/114 | Loss: 1.2922 | Accuracy: 71.88%
19:29:20 - Эпоха 20/20 | Батч 40/114 | Loss: 1.0277 | Accuracy: 78.12%
19:29:22 - Эпоха 20/20 | Батч 50/114 | Loss: 1.2910 | Accuracy: 59.38%
19:29:22 - Эпоха 20/20 | Батч 60/114 | Loss: 1.1647 | Accuracy: 68.75%
19:29:23 - Эпоха 20/20 | Батч 70/114 | Loss: 1.1330 | Accuracy: 65.62%
19:29:24 - Эпоха 20/20 | Батч 80/114 | Loss: 1.2699 | Accuracy: 56.25%
19:29:25 - Эпоха 20/20 | Батч 90/114 | Loss: 1.0996 | Accuracy: 68.75%
19:29:26 - Эпоха 20/20 | Батч 100/114 | Loss: 1.0405 | Accuracy: 68.75%
19:29:27 - Эпоха 20/20 | Батч 110/114 | Loss: 1.3706 | Accuracy: 46.88%
19:29:27 - Эпоха 20/20 | Батч 114/114 | Loss: 1.5711 | Accuracy: 41.67%
```
## Пример лог файла работы телеграмм бота
```
2025-12-25 19:40:54 - root - INFO - Используется токен из файла: 8336552276...
2025-12-25 19:40:54 - root - INFO - Создание экземпляра бота...
2025-12-25 19:40:54 - root - INFO - ==================================================
2025-12-25 19:40:54 - root - INFO - Инициализация Telegram бота для квизов
2025-12-25 19:40:54 - root - INFO - ==================================================
2025-12-25 19:40:54 - root - INFO - Инициализация компонентов бота...
2025-12-25 19:40:54 - root - INFO - Анализ архитектуры сохраненной модели...
2025-12-25 19:40:54 - root - INFO -    • embedding_dim: 128
2025-12-25 19:40:54 - root - INFO -    • hidden_dim: 256
2025-12-25 19:40:54 - root - INFO -    • num_layers: 2
2025-12-25 19:40:54 - root - INFO -    • output_dim: 9
2025-12-25 19:40:54 - root - INFO - Модель успешно загружена (полное соответствие)
2025-12-25 19:40:54 - root - INFO - Модель успешно инициализирована
2025-12-25 19:40:54 - root - INFO -    • Точность: 81.54%
2025-12-25 19:40:54 - root - INFO -    • Архитектура: BiLSTM x2 (hidden=256)
2025-12-25 19:40:54 - root - INFO -    • Словарь: 472 слов
2025-12-25 19:40:54 - root - INFO -    • Классы: 9
2025-12-25 19:40:54 - root - INFO - Тестовый прогноз выполнен успешно
2025-12-25 19:40:54 - root - INFO - Загружены вопросы из quiz_questions.json
2025-12-25 19:40:54 - root - INFO - QuizManager инициализирован. Загружено вопросов: легких=50, средних=50, сложных=50
2025-12-25 19:40:54 - root - INFO - Загружены интенты из extended_intents.json
2025-12-25 19:40:54 - root - INFO - Бот успешно инициализирован с нейросетью!
2025-12-25 19:40:54 - root - INFO - Инициализация бота завершена успешно
2025-12-25 19:40:54 - root - INFO - Запуск основного цикла бота...
2025-12-25 19:40:54 - root - INFO - ==================================================
2025-12-25 19:40:54 - root - INFO - Запуск бота...
2025-12-25 19:40:54 - root - INFO - ==================================================
2025-12-25 19:40:54 - root - INFO - Бот начал polling...
2025-12-25 19:42:29 - root - INFO - Новый пользователь: ID=946665825, username=TeenWolf
2025-12-25 19:43:05 - root - INFO - Сообщение от 946665825: Начнем
2025-12-25 19:43:05 - root - INFO - Предсказание: start_quiz (уверенность: 91.70%)
2025-12-25 19:43:06 - root - INFO - Намерение: start_quiz (уверенность: 91.70%, метод: neural)
2025-12-25 19:43:06 - root - INFO - Пользователь 946665825 начал процесс квиза
2025-12-25 19:43:16 - root - INFO - Сообщение от 946665825: Легкий
2025-12-25 19:43:16 - root - INFO - Предсказание: difficulty (уверенность: 49.60%)
2025-12-25 19:43:16 - root - INFO - Намерение: difficulty (уверенность: 49.60%, метод: neural)
2025-12-25 19:43:16 - root - INFO - Пользователь 946665825 начал квиз с уровнем: легкий
2025-12-25 19:43:16 - root - INFO - Для пользователя 946665825 подготовлено 5 вопросов уровня легкий
2025-12-25 19:43:25 - root - INFO - Пользователь 946665825 ответил на вопрос 1: правильно=True, выбрано=2, правильный=2, очки=5
2025-12-25 19:43:32 - root - INFO - Пользователь 946665825 ответил на вопрос 2: правильно=True, выбрано=2, правильный=2, очки=5
2025-12-25 19:43:42 - root - INFO - Пользователь 946665825 ответил на вопрос 3: правильно=True, выбрано=0, правильный=0, очки=5
2025-12-25 19:43:48 - root - INFO - Пользователь 946665825 ответил на вопрос 4: правильно=True, выбрано=2, правильный=2, очки=10
2025-12-25 19:43:53 - root - INFO - Пользователь 946665825 ответил на вопрос 5: правильно=True, выбрано=0, правильный=0, очки=10
2025-12-25 19:43:54 - root - INFO - Квиз завершен для пользователя 946665825: счет=35, правильно=5/5, точность=100.0%, уровень=легкий
2025-12-25 19:44:21 - root - INFO - Сообщение от 946665825: Уровни сложности
2025-12-25 19:44:22 - root - INFO - Предсказание: difficulty (уверенность: 73.92%)
2025-12-25 19:44:22 - root - INFO - Намерение: difficulty (уверенность: 73.92%, метод: neural)
2025-12-25 19:44:26 - root - INFO - Сообщение от 946665825: Помощь
2025-12-25 19:44:35 - root - INFO - Сообщение от 946665825: Статистика
2025-12-25 19:44:36 - root - INFO - Пользователь 946665825 запросил статистику: игр=1, лучший счет=35
2025-12-25 19:44:47 - root - INFO - Сообщение от 946665825: Ещё раз сыграть
2025-12-25 19:44:47 - root - INFO - Низкая уверенность (21.28%), используем keyword классификацию
2025-12-25 19:44:47 - root - INFO - Keyword классификация: start_quiz (оценка: 1)
2025-12-25 19:44:47 - root - INFO - Намерение: start_quiz (уверенность: 33.33%, метод: keyword)
2025-12-25 19:44:47 - root - INFO - Пользователь 946665825 начал процесс квиза
2025-12-25 19:44:55 - root - INFO - Сообщение от 946665825: Средний
2025-12-25 19:44:55 - root - INFO - Предсказание: difficulty (уверенность: 97.05%)
2025-12-25 19:44:55 - root - INFO - Намерение: difficulty (уверенность: 97.05%, метод: neural)
2025-12-25 19:44:55 - root - INFO - Пользователь 946665825 начал квиз с уровнем: средний
2025-12-25 19:44:55 - root - INFO - Для пользователя 946665825 подготовлено 5 вопросов уровня средний
2025-12-25 19:45:16 - root - INFO - Пользователь 946665825 ответил на вопрос 1: правильно=True, выбрано=3, правильный=3, очки=22
2025-12-25 19:45:21 - root - INFO - Пользователь 946665825 ответил на вопрос 2: правильно=True, выбрано=1, правильный=1, очки=22
2025-12-25 19:45:25 - root - INFO - Пользователь 946665825 ответил на вопрос 3: правильно=True, выбрано=1, правильный=1, очки=22
2025-12-25 19:46:04 - root - INFO - Пользователь 946665825 ответил на вопрос 4: правильно=False, выбрано=3, правильный=0, очки=0
2025-12-25 19:46:12 - root - INFO - Пользователь 946665825 ответил на вопрос 5: правильно=True, выбрано=0, правильный=0, очки=22
2025-12-25 19:46:13 - root - INFO - Квиз завершен для пользователя 946665825: счет=88, правильно=4/5, точность=80.0%, уровень=средний
2025-12-25 19:46:22 - root - INFO - Сообщение от 946665825: Покажи статистику
2025-12-25 19:46:22 - root - INFO - Предсказание: statistics (уверенность: 55.76%)
2025-12-25 19:46:22 - root - INFO - Намерение: statistics (уверенность: 55.76%, метод: neural)
2025-12-25 19:46:23 - root - INFO - Пользователь 946665825 запросил статистику: игр=2, лучший счет=88
2025-12-25 19:46:30 - root - INFO - Сообщение от 946665825: Ещё раз
2025-12-25 19:46:30 - root - INFO - Низкая уверенность (31.93%), используем keyword классификацию
2025-12-25 19:46:30 - root - INFO - Не удалось классифицировать, используется unknown
2025-12-25 19:46:30 - root - INFO - Намерение: unknown (уверенность: 0.00%, метод: keyword)
2025-12-25 19:46:39 - root - INFO - Сообщение от 946665825: Ещё сыграем
2025-12-25 19:46:39 - root - INFO - Предсказание: start_quiz (уверенность: 62.75%)
2025-12-25 19:46:39 - root - INFO - Намерение: start_quiz (уверенность: 62.75%, метод: neural)
2025-12-25 19:46:39 - root - INFO - Пользователь 946665825 начал процесс квиза
2025-12-25 19:46:55 - root - INFO - Сообщение от 946665825: Сложный
2025-12-25 19:46:55 - root - INFO - Предсказание: difficulty (уверенность: 59.74%)
2025-12-25 19:46:55 - root - INFO - Намерение: difficulty (уверенность: 59.74%, метод: neural)
2025-12-25 19:46:55 - root - INFO - Пользователь 946665825 начал квиз с уровнем: сложный
2025-12-25 19:46:55 - root - INFO - Для пользователя 946665825 подготовлено 5 вопросов уровня сложный
2025-12-25 19:47:00 - root - INFO - Пользователь 946665825 ответил на вопрос 1: правильно=True, выбрано=1, правильный=1, очки=40
2025-12-25 19:48:02 - root - INFO - Пользователь 946665825 ответил на вопрос 2: правильно=False, выбрано=2, правильный=1, очки=0
2025-12-25 19:48:50 - root - INFO - Пользователь 946665825 ответил на вопрос 3: правильно=False, выбрано=3, правильный=1, очки=0
2025-12-25 19:49:00 - root - INFO - Пользователь 946665825 ответил на вопрос 4: правильно=True, выбрано=0, правильный=0, очки=40
2025-12-25 19:49:10 - root - INFO - Пользователь 946665825 ответил на вопрос 5: правильно=True, выбрано=3, правильный=3, очки=40
2025-12-25 19:49:12 - root - INFO - Квиз завершен для пользователя 946665825: счет=120, правильно=3/5, точность=60.0%, уровень=сложный
```
